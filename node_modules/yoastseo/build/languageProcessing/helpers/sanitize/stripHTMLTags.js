"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.stripIncompleteTags = exports.stripFullTags = exports.stripBlockTagsAtStartEnd = exports.default = void 0;
var _stripSpaces = _interopRequireDefault(require("./stripSpaces.js"));
var _html = require("../html/html.js");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/** @module stringProcessing/stripHTMLTags */

const blockElementStartRegex = new RegExp("^<(" + _html.blockElements.join("|") + ")[^>]*?>", "i");
const blockElementEndRegex = new RegExp("</(" + _html.blockElements.join("|") + ")[^>]*?>$", "i");

/**
 * Strip incomplete tags within a text. Strips an end tag at the beginning of a string and the start tag at the end of a
 * start of a string.
 *
 * @param {String} text The text to strip the HTML-tags from at the begin and end.
 * @returns {String} The text without HTML-tags at the begin and end.
 */
const stripIncompleteTags = function (text) {
  text = text.replace(/^(<\/([^>]+)>)+/i, "");
  text = text.replace(/(<([^/>]+)>)+$/i, "");
  return text;
};

/**
 * Removes the block element tags at the beginning and end of a string and returns this string.
 *
 * @param {string} text The unformatted string.
 * @returns {string} The text with removed HTML begin and end block elements
 */
exports.stripIncompleteTags = stripIncompleteTags;
const stripBlockTagsAtStartEnd = function (text) {
  text = text.replace(blockElementStartRegex, "");
  text = text.replace(blockElementEndRegex, "");
  return text;
};

/**
 * Strip HTML-tags from text
 *
 * @param {String} text The text to strip the HTML-tags from.
 * @returns {String} The text without HTML-tags.
 */
exports.stripBlockTagsAtStartEnd = stripBlockTagsAtStartEnd;
const stripFullTags = function (text) {
  text = text.replace(/(<([^>]+)>)/ig, " ");
  text = (0, _stripSpaces.default)(text);
  return text;
};
exports.stripFullTags = stripFullTags;
var _default = exports.default = {
  stripFullTags: stripFullTags,
  stripIncompleteTags: stripIncompleteTags,
  stripBlockTagsAtStartEnd: stripBlockTagsAtStartEnd
};
//# sourceMappingURL=stripHTMLTags.js.map